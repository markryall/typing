<!DOCTYPE html>
<html lang="en">
	<head>
		<style>
			body {
					font-family: monospace;
					font-size: 18px;
					background-color: #000;
					color: #FFF;
			}
			#container {
				width: 600px;
				margin-top: 100px;
				margin-right: auto;
				margin-left: auto;
				}
			.right { color: greenyellow; }
			.wrong { color: orangered; }
		</style>
	</head>
	<body>
	<div id="container">
		<div id="expected"></div>
		<div id="actual"></div>
	</div>

	<script type="text/javascript" charset="utf-8">
		function ts() {
			return (new Date()).getTime();
		}

		const startTime = ts();
		let currentTime = startTime;
		const progress = [];
		const events = [];
		const corpus = "whatever";

		const expectedElement = document.getElementById("expected");
		const actualElement = document.getElementById("actual");

		expectedElement.innerHTML = corpus;

		function renderProgress() {
			let content = '';

			progress.forEach(function(key) {
				const style = key.expectedChar === key.actualChar ? 'right' : 'wrong';
				content += `<span class="${style}">${key.actualChar}</span>`;
			});

			actualElement.innerHTML = content;
		}

		document.onkeyup = function (event) {
			const newTime = ts();
			if (event.key.length === 1) {
				const expectedChar = corpus[progress.length];
				const actualChar = event.key;
				const delay = newTime - currentTime;

				progress.push({ expectedChar, actualChar, delay });
				renderProgress();
				currentTime = newTime;
			}
			if (event.code === 'Backspace') {
				progress.splice(-1, 1);
				renderProgress();
			}
		}
		</script>
	</body>
</html>
